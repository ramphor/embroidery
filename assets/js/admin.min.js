!function e(t,n,o){function i(r,c){if(!n[r]){if(!t[r]){var s="function"==typeof require&&require;if(!c&&s)return s(r,!0);if(a)return a(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[r]={exports:{}};t[r][0].call(d.exports,function(e){var n=t[r][1][e];return i(n||e)},d,d.exports,e,t,n,o)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<o.length;r++)i(o[r]);return i}({1:[function(e,t,n){!function(t){"use strict";var n={maintenanceMode:null,cacheElements:function(){this.cache={$window:t(window),$body:t("body"),$switchMode:t("#embroidery-switch-mode"),$goToEditLink:t("#embroidery-go-to-edit-page-link"),$switchModeInput:t("#embroidery-switch-mode-input"),$switchModeButton:t("#embroidery-switch-mode-button"),$embroideryLoader:t(".embroidery-loader"),$builderEditor:t("#embroidery-editor"),$importButton:t("#embroidery-import-template-trigger"),$importArea:t("#embroidery-import-template-area"),$settingsForm:t("#embroidery-settings-form"),$settingsTabsWrapper:t("#embroidery-settings-tabs-wrapper")},this.cache.$settingsFormPages=this.cache.$settingsForm.find(".embroidery-settings-form-page"),this.cache.$activeSettingsPage=this.cache.$settingsFormPages.filter(".embroidery-active"),this.cache.$settingsTabs=this.cache.$settingsTabsWrapper.children(),this.cache.$activeSettingsTab=this.cache.$settingsTabs.filter(".nav-tab-active")},toggleStatus:function(){var e=this.isEmbroideryMode();this.cache.$body.toggleClass("embroidery-editor-active",e).toggleClass("embroidery-editor-inactive",!e)},bindEvents:function(){var e=this;e.cache.$switchModeButton.on("click",function(n){if(n.preventDefault(),e.isEmbroideryMode())e.cache.$switchModeInput.val("");else{e.cache.$switchModeInput.val(!0);var o=t("#title");o.val()||o.val("Embroidery #"+t("#post_ID").val()),wp.autosave&&wp.autosave.server.triggerSave(),e.animateLoader(),t(document).on("heartbeat-tick.autosave",function(){e.cache.$window.off("beforeunload.edit-post"),window.location=e.cache.$goToEditLink.attr("href")})}e.toggleStatus()}),e.cache.$goToEditLink.on("click",function(){e.animateLoader()}),t("div.notice.embroidery-message-dismissed").on("click","button.notice-dismiss",function(e){e.preventDefault(),t.post(ajaxurl,{action:"embroidery_set_admin_notice_viewed",notice_id:t(this).closest(".embroidery-message-dismissed").data("notice_id")})}),t("#embroidery-clear-cache-button").on("click",function(e){e.preventDefault();var n=t(this);n.removeClass("success").addClass("loading"),t.post(ajaxurl,{action:"embroidery_clear_cache",_nonce:n.data("nonce")}).done(function(){n.removeClass("loading").addClass("success")})}),t("#embroidery-library-sync-button").on("click",function(e){e.preventDefault();var n=t(this);n.removeClass("success").addClass("loading"),t.post(ajaxurl,{action:"embroidery_reset_library",_nonce:n.data("nonce")}).done(function(){n.removeClass("loading").addClass("success")})}),t("#embroidery-replace-url-button").on("click",function(e){e.preventDefault();var n=t(this),o=n.parents("tr"),i=o.find('[name="from"]'),a=o.find('[name="to"]');n.removeClass("success").addClass("loading"),t.post(ajaxurl,{action:"embroidery_replace_url",from:i.val(),to:a.val(),_nonce:n.data("nonce")}).done(function(e){n.removeClass("loading"),e.success&&n.addClass("success");(new DialogsManager.Instance).createWidget("alert",{message:e.data}).show()})}),e.cache.$settingsTabs.on({click:function(e){e.preventDefault(),e.currentTarget.focus()},focus:function(){var t=location.href.replace(/#.*/,"");history.pushState({},"",t+this.hash),e.goToSettingsTabFromHash()}}),t(".embroidery-rollback-button").on("click",function(e){e.preventDefault();var n=t(this);(new DialogsManager.Instance).createWidget("confirm",{headerMessage:EmbroideryAdminConfig.i18n.rollback_to_previous_version,message:EmbroideryAdminConfig.i18n.rollback_confirm,strings:{confirm:EmbroideryAdminConfig.i18n.yes,cancel:EmbroideryAdminConfig.i18n.cancel},onConfirm:function(){n.addClass("loading"),location.href=n.attr("href")}}).show()}),t(".embroidery_css_print_method select").on("change",function(){var e=t(".embroidery-css-print-method-description");e.hide(),e.filter('[data-value="'+t(this).val()+'"]').show()}).trigger("change")},init:function(){this.cacheElements(),this.bindEvents(),this.initTemplatesImport(),this.initMaintenanceMode(),this.goToSettingsTabFromHash()},initTemplatesImport:function(){if(this.cache.$body.hasClass("post-type-embroidery_library")){var e=this.cache.$importButton,n=this.cache.$importArea;this.cache.$formAnchor=t("h1"),t("#wpbody-content").find(".page-title-action:last").after(e),this.cache.$formAnchor.after(n),e.on("click",function(){t("#embroidery-import-template-area").toggle()})}},initMaintenanceMode:function(){var t=e("embroidery-admin/maintenance-mode");this.maintenanceMode=new t},isEmbroideryMode:function(){return!!this.cache.$switchModeInput.val()},animateLoader:function(){this.cache.$goToEditLink.addClass("embroidery-animate")},goToSettingsTabFromHash:function(){var e=location.hash.slice(1);e&&this.goToSettingsTab(e)},goToSettingsTab:function(e){var t=this.cache.$settingsFormPages.filter("#"+e);if(t.length){this.cache.$activeSettingsPage.removeClass("embroidery-active"),this.cache.$activeSettingsTab.removeClass("nav-tab-active");var n=this.cache.$settingsTabs.filter("#embroidery-settings-"+e);t.addClass("embroidery-active"),n.addClass("nav-tab-active"),this.cache.$settingsForm.attr("action","options.php#"+e),this.cache.$activeSettingsPage=t,this.cache.$activeSettingsTab=n}}};t(function(){n.init()}),window.embroideryAdmin=n}(jQuery)},{"embroidery-admin/maintenance-mode":2}],2:[function(e,t,n){var o;o=e("embroidery-utils/view-module").extend({getDefaultSettings:function(){return{selectors:{modeSelect:".embroidery_maintenance_mode_mode select",maintenanceModeTable:"#tab-maintenance_mode table",maintenanceModeDescriptions:".embroidery-maintenance-mode-description",excludeModeSelect:".embroidery_maintenance_mode_exclude_mode select",excludeRolesArea:".embroidery_maintenance_mode_exclude_roles",templateSelect:".embroidery_maintenance_mode_template_id select",editTemplateButton:".embroidery-edit-template",maintenanceModeError:".embroidery-maintenance-mode-error"},classes:{isEnabled:"embroidery-maintenance-mode-is-enabled"}}},getDefaultElements:function(){var e={},t=this.getSettings("selectors");return e.$modeSelect=jQuery(t.modeSelect),e.$maintenanceModeTable=e.$modeSelect.parents(t.maintenanceModeTable),e.$excludeModeSelect=e.$maintenanceModeTable.find(t.excludeModeSelect),e.$excludeRolesArea=e.$maintenanceModeTable.find(t.excludeRolesArea),e.$templateSelect=e.$maintenanceModeTable.find(t.templateSelect),e.$editTemplateButton=e.$maintenanceModeTable.find(t.editTemplateButton),e.$maintenanceModeDescriptions=e.$maintenanceModeTable.find(t.maintenanceModeDescriptions),e.$maintenanceModeError=e.$maintenanceModeTable.find(t.maintenanceModeError),e},bindEvents:function(){var e=this.getSettings(),t=this.elements;t.$modeSelect.on("change",function(){t.$maintenanceModeTable.toggleClass(e.classes.isEnabled,!!t.$modeSelect.val()),t.$maintenanceModeDescriptions.hide(),t.$maintenanceModeDescriptions.filter('[data-value="'+t.$modeSelect.val()+'"]').show()}).trigger("change"),t.$excludeModeSelect.on("change",function(){t.$excludeRolesArea.toggle("custom"===t.$excludeModeSelect.val())}).trigger("change"),t.$templateSelect.on("change",function(){var e=t.$templateSelect.val();if(!e)return t.$editTemplateButton.hide(),void t.$maintenanceModeError.show();var n=EmbroideryAdminConfig.home_url+"?p="+e+"&embroidery";t.$editTemplateButton.prop("href",n).show(),t.$maintenanceModeError.hide()}).trigger("change")}}),t.exports=o},{"embroidery-utils/view-module":4}],3:[function(e,t,n){var o=function(){var e,t=jQuery,n=arguments,o=this,i={};this.getItems=function(e,t){if(t){var n=t.split("."),o=n.splice(0,1);if(!n.length)return e[o];if(!e[o])return;return this.getItems(e[o],n.join("."))}return e},this.getSettings=function(t){return this.getItems(e,t)},this.setSettings=function(n,i,a){if(a||(a=e),"object"==typeof n)return t.extend(a,n),o;var r=n.split("."),c=r.splice(0,1);return r.length?(a[c]||(a[c]={}),o.setSettings(r.join("."),i,a[c])):(a[c]=i,o)},this.forceMethodImplementation=function(e){var t=e.callee.name;throw new ReferenceError("The method "+t+" must to be implemented in the inheritor child.")},this.on=function(e,t){return i[e]||(i[e]=[]),i[e].push(t),o},this.off=function(e,t){if(!i[e])return o;if(!t)return delete i[e],o;var n=i[e].indexOf(t);return-1!==n&&delete i[e][n],o},this.trigger=function(e){var n="on"+e[0].toUpperCase()+e.slice(1),a=Array.prototype.slice.call(arguments,1);o[n]&&o[n].apply(o,a);var r=i[e];return r?(t.each(r,function(e,t){t.apply(o,a)}),o):o},o.__construct.apply(o,n),t.each(o,function(e){var t=o[e];"function"==typeof t&&(o[e]=function(){return t.apply(o,arguments)})}),function(){e=o.getDefaultSettings();var i=n[0];i&&t.extend(e,i)}(),o.trigger("init")};o.prototype.__construct=function(){},o.prototype.getDefaultSettings=function(){return{}},o.extendsCount=0,o.extend=function(e){var t=jQuery,n=this,i=function(){return n.apply(this,arguments)};t.extend(i,n),(i.prototype=Object.create(t.extend({},n.prototype,e))).constructor=i;var a=++o.extendsCount;return i.prototype.getConstructorID=function(){return a},i.__super__=n.prototype,i},t.exports=o},{}],4:[function(e,t,n){var o;o=e("./module").extend({elements:null,getDefaultElements:function(){return{}},bindEvents:function(){},onInit:function(){this.initElements(),this.bindEvents()},initElements:function(){this.elements=this.getDefaultElements()}}),t.exports=o},{"./module":3}]},{},[1]);